{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.211.0"},"children":{"CouponLeaks-Foundation-dev":{"id":"CouponLeaks-Foundation-dev","path":"CouponLeaks-Foundation-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.211.0"},"children":{"UserPool":{"id":"UserPool","path":"CouponLeaks-Foundation-dev/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CouponLeaks-Foundation-dev/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"aliasAttributes":["email"],"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"app":"couponleaks","env":"dev"},"userPoolName":"couponleaks-dev","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"UserPoolClient":{"id":"UserPoolClient","path":"CouponLeaks-Foundation-dev/UserPool/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CouponLeaks-Foundation-dev/UserPool/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CouponLeaks-Foundation-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"CouponLeaks-Foundation-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}}}},"Exports":{"id":"Exports","path":"CouponLeaks-Foundation-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"CouponLeaks-Foundation-dev/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CouponLeaks-Foundation-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.211.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CouponLeaks-Foundation-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.211.0"}}}},"CouponLeaks-Functions-dev":{"id":"CouponLeaks-Functions-dev","path":"CouponLeaks-Functions-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.211.0"},"children":{"ProfilesLambda":{"id":"ProfilesLambda","path":"CouponLeaks-Functions-dev/ProfilesLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.211.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CouponLeaks-Functions-dev/ProfilesLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CouponLeaks-Functions-dev/ProfilesLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}},"Resource":{"id":"Resource","path":"CouponLeaks-Functions-dev/ProfilesLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"app","value":"couponleaks"},{"key":"env","value":"dev"}]}}}}},"Code":{"id":"Code","path":"CouponLeaks-Functions-dev/ProfilesLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"CouponLeaks-Functions-dev/ProfilesLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"CouponLeaks-Functions-dev/ProfilesLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CouponLeaks-Functions-dev/ProfilesLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-883273260741-us-east-1","s3Key":"749672beaf5fd3c9c4322e6980df5080c5bd6522b78d61aaaf5bcf18ade70718.zip"},"handler":"handler.handler","role":{"Fn::GetAtt":["ProfilesLambdaServiceRoleF60E2C07","Arn"]},"runtime":"python3.11","tags":[{"key":"app","value":"couponleaks"},{"key":"env","value":"dev"}]}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CouponLeaks-Functions-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"CouponLeaks-Functions-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}}}},"Exports":{"id":"Exports","path":"CouponLeaks-Functions-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"ProfilesLambda68F7E76E\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ProfilesLambda68F7E76E\",\"Arn\"]}","path":"CouponLeaks-Functions-dev/Exports/Output{\"Fn::GetAtt\":[\"ProfilesLambda68F7E76E\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CouponLeaks-Functions-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.211.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CouponLeaks-Functions-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.211.0"}}}},"CouponLeaks-AppSync-dev":{"id":"CouponLeaks-AppSync-dev","path":"CouponLeaks-AppSync-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.211.0"},"children":{"Api":{"id":"Api","path":"CouponLeaks-AppSync-dev/Api","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CouponLeaks-AppSync-dev/Api/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"additionalAuthenticationProviders":[{"authenticationType":"AMAZON_COGNITO_USER_POOLS","userPoolConfig":{"userPoolId":{"Fn::ImportValue":"CouponLeaks-Foundation-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"awsRegion":"us-east-1","defaultAction":"ALLOW"}}],"authenticationType":"API_KEY","name":"couponleaks-dev","tags":[{"key":"app","value":"couponleaks"},{"key":"env","value":"dev"}],"xrayEnabled":true}}},"Schema":{"id":"Schema","path":"CouponLeaks-AppSync-dev/Api/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ApiF70053CD","ApiId"]},"definition":"schema {\n  query: Query\n}\n\ntype Query {\n  # Returns a profile by username; nullable when not found\n  getProfile(username: String!): Profile @aws_api_key @aws_cognito_user_pools\n}\n\ntype Profile {\n  username: String!\n  displayName: String\n  bio: String\n  website: String\n}\n"}}},"DefaultApiKey":{"id":"DefaultApiKey","path":"CouponLeaks-AppSync-dev/Api/DefaultApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnApiKey","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::ApiKey","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ApiF70053CD","ApiId"]},"expires":1786748494}}},"LogGroup":{"id":"LogGroup","path":"CouponLeaks-AppSync-dev/Api/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}},"ProfilesDS":{"id":"ProfilesDS","path":"CouponLeaks-AppSync-dev/Api/ProfilesDS","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.211.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"CouponLeaks-AppSync-dev/Api/ProfilesDS/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CouponLeaks-AppSync-dev/Api/ProfilesDS/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}},"Resource":{"id":"Resource","path":"CouponLeaks-AppSync-dev/Api/ProfilesDS/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"app","value":"couponleaks"},{"key":"env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CouponLeaks-AppSync-dev/Api/ProfilesDS/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CouponLeaks-AppSync-dev/Api/ProfilesDS/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"CouponLeaks-Functions-dev:ExportsOutputFnGetAttProfilesLambda68F7E76EArnE90DEED5"},{"Fn::Join":["",[{"Fn::ImportValue":"CouponLeaks-Functions-dev:ExportsOutputFnGetAttProfilesLambda68F7E76EArnE90DEED5"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"ApiProfilesDSServiceRoleDefaultPolicyE2B55F45","roles":[{"Ref":"ApiProfilesDSServiceRole84F87DED"}]}}}}}}},"Resource":{"id":"Resource","path":"CouponLeaks-AppSync-dev/Api/ProfilesDS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ApiF70053CD","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"CouponLeaks-Functions-dev:ExportsOutputFnGetAttProfilesLambda68F7E76EArnE90DEED5"}},"name":"ProfilesDS","serviceRoleArn":{"Fn::GetAtt":["ApiProfilesDSServiceRole84F87DED","Arn"]},"type":"AWS_LAMBDA"}}}}},"GetProfile":{"id":"GetProfile","path":"CouponLeaks-AppSync-dev/Api/GetProfile","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.211.0"},"children":{"Resource":{"id":"Resource","path":"CouponLeaks-AppSync-dev/Api/GetProfile/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ApiF70053CD","ApiId"]},"dataSourceName":"ProfilesDS","fieldName":"getProfile","kind":"UNIT","typeName":"Query"}}}}}}},"GraphqlUrl":{"id":"GraphqlUrl","path":"CouponLeaks-AppSync-dev/GraphqlUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"ApiId":{"id":"ApiId","path":"CouponLeaks-AppSync-dev/ApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"ApiKey":{"id":"ApiKey","path":"CouponLeaks-AppSync-dev/ApiKey","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CouponLeaks-AppSync-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"CouponLeaks-AppSync-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CouponLeaks-AppSync-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.211.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CouponLeaks-AppSync-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.211.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}